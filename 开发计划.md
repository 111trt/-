# 全球物流网络模拟器  
## 产品需求与开发计划文档（V1.0）

---

## 一、文档概述

### 1.1 文档目的
本文件用于系统性描述「全球物流网络模拟器」的产品需求与开发计划，为产品立项、需求梳理、架构设计与开发实施提供统一依据，确保功能完整、不遗漏关键能力。

### 1.2 目标读者
- 企业物流/供应链负责人  
- 产品经理、项目经理  
- 研发团队（前端、后端、算法/AI 工程师）  
- 业务顾问、实施人员  
- 客户与合作伙伴（了解产品能力）

### 1.3 名词解释（示例）
- 节点：物流网络中的实体位置，如港口、机场、仓库、铁路场站等。  
- 线路：两个节点之间的运输连接，具备运输方式、距离、时间、成本等属性。  
- 场景/项目：一次完整的网络规划与仿真配置（节点 + 线路 + 参数 + 结果）。  
- 动态事件：天气、拥堵、政策变化等对物流网络产生影响的外部因素。  

---

## 二、产品定位与目标

### 2.1 产品定位
「全球物流网络模拟器」是一款基于全球地图的物流网络规划与仿真工具，帮助用户在可视化地图上构建和调整节点与线路，模拟不同运输方案，在时间、成本、碳排放等多维度上进行优化决策，并通过动画和数据大屏展示结果。

### 2.2 目标用户
- 国际/国内物流公司网络规划与运营人员  
- 货代公司、供应链服务商  
- 大型制造企业、电商企业物流部门  
- 咨询公司、研究机构、培训机构（教学与演示）  

### 2.3 核心价值
- 快速搭建全球或区域物流网络蓝图  
- 多方案对比（时间/成本/碳排放等），辅助决策  
- 通过动画和数据可视化展示方案，有助于内部汇报与对外沟通  
- 模拟关税、清关与动态事件，预判风险与成本变化  

---

## 三、功能需求说明

### 3.1 地图与节点管理

#### 3.1.1 全球地图展示
- 支持全球地图显示，包含国家边界、主要城市、海岸线等基本地理信息。  
- 支持地图缩放、拖拽、全屏显示。  
- 可切换不同底图（普通地图、卫星图等，第一阶段可先使用一种）。

#### 3.1.2 节点层级和缩放联动
- 地图缩至最小时：
  - 显示全球最重要的物流节点（如大型枢纽港口、国际机场、全球分拨中心）。  
- 随着地图放大：
  - 中、小型节点逐步显示，直至显示末端配送站等。  
- 不同层级节点在不同缩放级别的显示规则可配置。

#### 3.1.3 节点类型与属性
- 节点类型示例：
  - 海港、机场、铁路场站、公路枢纽、大型仓库、区域分拨中心、末端网点等。  
- 节点属性：
  - 名称、地理坐标（经纬度）  
  - 类型、等级（全球枢纽/区域中心/普通节点等）  
  - 规模（吞吐能力、日处理能力等，可用数值或等级表示）  
  - 所属国家/地区  
  - 是否为清关节点  
- 节点图标与样式：
  - 颜色区分类型  
  - 大小或外圈光环体现规模/等级  

#### 3.1.4 节点自定义与管理
- 用户可在地图任意位置创建节点：  
  - 设置名称、类型、等级、规模等信息。  
- 节点模板：
  - 用户可预设节点类型模板（例如「FBA 仓」「冷链仓」「保税仓」），快速批量创建。  
- 节点管理操作：
  - 新建、编辑、删除、启用/停用  
  - 拖拽调整位置（限于合理范围）  

---

### 3.2 线路与运输方式管理

#### 3.2.1 线路创建方式
- 支持通过在地图上按顺序点击节点进行连线：  
  - 一个节点可连接到多个节点（分拨网络）。  
  - 一个节点可以与单一节点构成点对点线路。  
  - 节点可重复出现在多条线路中。  
- 线路的起点、终点、经过节点顺序可编辑。

#### 3.2.2 运输方式
- 支持运输方式包括但不限于：
  - 公路运输  
  - 铁路运输  
  - 海运  
  - 空运  
- 每种方式有独立的：
  - 线路样式（颜色、线型）  
  - 动画图标（卡车、列车、货轮、飞机等）  

#### 3.2.3 现实可行路线约束
- 公路：
  - 限制在可通车的陆地范围内，不跨越海洋。  
- 铁路：
  - 限定在铁路网络覆盖区域，优先使用现实线路（可基于 OSM 等数据）。  
- 海运：
  - 限制在海洋航线/水域，避免线路穿越陆地。  
- 空运：
  - 通常只在机场节点之间连线，支持跨国跨区域。  
- 系统需在建线时进行基础合理性校验，如明显不合理的线路需提示或禁止。

#### 3.2.4 线路属性
- 距离（根据地理坐标计算或根据输入设定）  
- 预计运输时间（可由距离 + 速度/时效模型计算）  
- 单位成本（单位距离/单位重量/单位体积的成本）  
- 最大运力（可选）  
- 发车频次/时刻表（后续版本可扩展）  

---

### 3.3 AI 路线规划与多方案优化

#### 3.3.1 需求输入
- 起点与终点（支持单起点单终点，多起点多终点）。  
- 货量信息（重量/体积/票数）、货物类型（普货、冷链、危险品等）。  
- 服务要求：
  - 最晚送达时间  
  - 最大可接受成本  
  - 必经或不可经过的节点/国家（可选）  

#### 3.3.2 规划目标与方案
系统需支持自动生成多种方案，至少包括：  
- 时间最短方案  
- 成本最低方案  
- 碳排放最少方案  
- 综合优化方案（时间/成本/碳排放多目标权重可配置）

#### 3.3.3 多目标权重配置
- 用户可设定各因素权重，例如：  
  - 时间 50%，成本 30%，碳排放 20%。  
- 系统根据权重综合评分，对方案排序。

#### 3.3.4 方案结果展示
- 地图上高亮显示每条方案的线路与经停节点。  
- 方案明细数据：
  - 总时间、总成本、总碳排放  
  - 清关时间与费用、关税明细（若涉及跨国）  
  - 各段线路的运输方式与属性（时间/成本拆分）  

---

### 3.4 关税与清关模拟

#### 3.4.1 清关节点
- 支持将特定节点标记为清关节点（口岸、港口、机场、保税区等）。  
- 对跨国线路：
  - 系统可根据规则自动插入清关节点，或由用户手动指定。  

#### 3.4.2 清关时间与成本
- 每个清关节点可配置：
  - 基础清关时间  
  - 随机延迟范围（如 ±X%）  
  - 清关费用：
    - 固定费用  
    - 按货值/货量/票数计算的可变费用  

#### 3.4.3 关税规则
- 为简化，可先建立自定义货物分类（模拟 HS 类目）：  
  - 每类货物对应不同的关税率或固定关税额度。  
- 在跨越不同国家/关区时：
  - 按货物分类与货值计算关税。  
- 关税计入方案总成本，并可单独展示。

#### 3.4.4 成本拆分展示
- 方案总成本需要拆分为：
  - 运输成本  
  - 清关费用  
  - 关税成本  
- 在报表和大屏中分别展示各部分占比与绝对值。

---

### 3.5 动态事件模拟

#### 3.5.1 事件类型
- 天气事件：
  - 暴雨、台风、暴雪等，对特定区域或节点/线路产生影响。  
- 港口/机场拥堵：
  - 导致处理时间延长或吞吐能力下降。  
- 政策变化：
  - 关税上调/下调  
  - 某类货物临时禁运或增加检查流程  
- 运营中断：
  - 罢工、设备故障、突发事件等。

#### 3.5.2 事件配置
- 用户可以创建事件：
  - 选择作用对象：节点、线路或地理区域  
  - 设置生效时间与持续时间  
  - 设置影响参数：
    - 时间延长比例  
    - 成本增加比例  
    - 部分线路关闭（不可用）  

#### 3.5.3 事件影响
- 仿真过程中：
  - 事件生效时，相关线路/节点的时效或成本自动调整。  
  - 若线路关闭，需要体现延误或重新规划结果（可分为自动绕行或失败）。  
- 对比分析：
  - 支持对比有事件和无事件场景下的关键指标变化（时间、成本、准时率等）。  

#### 3.5.4 可视化表现
- 地图上对受事件影响的节点/线路进行高亮或特殊标记。  
- 大屏中提供「事件影响分析」模块，展示：
  - 各事件造成的总延误时间、成本增加。  
  - 事件类型分布。  

---

### 3.6 仿真动画与可视化展示

#### 3.6.1 运行动画
- 对选定方案进行物流过程仿真：
  - 不同运输方式使用不同动画图标（卡车、火车、轮船、飞机）。  
  - 图标沿线路移动，反映时间进度。  
- 动画控制：
  - 播放、暂停、停止  
  - 调整播放速度  
  - 时间轴拖动回放关键时刻  

#### 3.6.2 多货流与网络负载
- 支持多个订单/批次同时在网络中流动：  
  - 可观察网络瓶颈与拥堵点。  
- 可显示每条线路的当前负载程度（如线条粗细、颜色深浅）。  

---

### 3.7 数据分析与全屏大屏

#### 3.7.1 关键指标
在大屏或分析页面展示以下指标（至少包括）：  
- 总运输量（按时间段统计）  
- 平均运输时间、最长/最短运输时间  
- 总成本及结构（运输/清关/关税）  
- 总碳排放量  
- 准时率、延误原因分布（天气/拥堵/清关/其他）  

#### 3.7.2 可视化图表
- 折线图：时间维度的指标变化（如日/周/月）。  
- 柱状图/堆叠柱图：不同线路、节点、国家、运输方式的对比。  
- 饼图/环形图：成本结构、碳排放来源。  
- 桑基图/流向图：货物流向结构和比例。  

#### 3.7.3 AI 建议
- 基于仿真数据和指标，自动生成业务建议，例如：
  - 建议增加某条线路运力或调整发车频次。  
  - 建议更换某段运输方式以降低成本或碳排放。  
  - 建议将某节点升级为区域枢纽或增设新节点。  
- 建议以文本列表形式展示，并在地图或图表中高亮相关对象。

#### 3.7.4 数据导出
- 支持导出 Excel/CSV：
  - 路线明细、成本与关税拆分、清关节点信息、事件影响分析。  
- 支持导出 PDF 报告：
  - 包含地图快照、关键图表、AI 建议摘要。  

---

### 3.8 场景管理与历史记录

#### 3.8.1 场景/项目管理
- 每一次网络规划与仿真可保存为一个「场景/项目」。  
- 场景属性：
  - 名称、标签、创建时间、修改时间、创建人等。  

#### 3.8.2 历史记录与版本
- 支持自动保存场景版本：  
  - 每次修改关键配置（节点/线路/规则）可生成新的版本。  
- 用户可：
  - 查看历史版本  
  - 一键恢复到某个历史版本并重新仿真  
  - 删除不需要的版本  

#### 3.8.3 场景对比
- 支持对比两个或多个场景/版本的关键指标：  
  - 时间、成本、碳排放、准时率等。  

---

### 3.9 协作与分享

#### 3.9.1 链接分享
- 为场景生成访问链接：  
  - 可设置权限（只读/可编辑）。  
- 国内外用户可通过浏览器查看方案地图和关键数据。

#### 3.9.2 报告分享
- 一键生成适合对外展示的报告（PDF 或演示文稿结构）：  
  - 包含地图截图、关键指标图表、AI 建议。  

#### 3.9.3 多人协作（进阶）
- 用户账号体系（基础版可选）：
  - 不同角色（查看、编辑、管理员）。  
- 支持对场景进行批注、评论、修改记录追踪。  

---

## 四、非功能性需求（简要）

### 4.1 性能与规模
- 支持至少数百个节点、数千条线路的流畅展示与操作。  
- 地图交互（缩放、拖拽）延迟可接受（小于 300ms 为宜）。  

### 4.2 可用性
- 操作尽量可视化、直观，减少专业术语阻碍。  
- 提供必要的操作引导和示例场景。  

### 4.3 可扩展性
- 支持后续扩展更多运输方式（如多式联运、管道运输等）。  
- 支持接入外部数据源（实时运价、实时天气等）。  

---

## 五、总体技术架构与选型（概要）

本章节为开发团队提供方向，可在后续详细设计文档中展开。

### 5.1 前端技术建议
- Web 前端框架：React 或 Vue。  
- 地图引擎：Mapbox GL、Leaflet 或 OpenLayers。  
- 图表库：ECharts、Chart.js 或 D3.js。  

### 5.2 后端技术建议
- 编程语言：
  - Node.js（前后端统一技术栈）  
  - 或 Python（适合算法、优化模型开发）  
- 数据库：
  - PostgreSQL 或 MySQL  
  - 地理数据可使用 PostGIS（PostgreSQL 扩展）  

### 5.3 AI/算法模块
- 路线规划：最短路径、最小成本流等基础算法。  
- 多目标优化：基于权重的综合评分，未来可接入混合整数规划或元启发式算法。

---

## 六、分阶段开发计划（里程碑）

### 6.1 阶段一：基础地图与节点/线路（MVP）

目标：可在地图上创建节点与线路，实现基础可视化。  

- 集成地图组件，完成全球展示与缩放。  
- 实现节点的创建、编辑、删除、拖拽。  
- 实现节点类型、等级、规模配置与不同图标展示。  
- 实现线路创建：节点之间连线，支持选择运输方式。  
- 将节点与线路数据持久化到后端。  

验收标准：  
- 地图可流畅操作。  
- 可创建多个节点和线路，并按缩放层级合理显示。

---

### 6.2 阶段二：基础规划与仿真

目标：实现基础 AI 规划（时间/成本）和运行动画。  

- 基于现有网络，实现最短时间/最低成本路径计算。  
- 支持用户指定起点、终点与货量等基础参数。  
- 实现线路运行动画：车辆/船舶/飞机沿线路移动。  
- 实现简单方案指标统计（总时间、总成本）。  
- 实现场景保存与加载。  

验收标准：  
- 给定起点和终点，能够生成至少两种方案。  
- 仿真动画可播放、暂停、重复。  

---

### 6.3 阶段三：关税与清关模拟

目标：引入跨国运输中的清关时间和关税成本。  

- 为节点增加清关属性与国家/关区信息。  
- 在跨国线路上自动/手动加入清关节点。  
- 配置清关时间和清关费用模型。  
- 配置简化的关税规则并在跨境时自动计算关税。  
- 在方案结果中展示清关与关税的拆分成本。  

验收标准：  
- 不同路线的关税/清关成本明显不同且计算逻辑正确。  
- 总成本中有清晰的成本结构拆分。  

---

### 6.4 阶段四：动态事件与多目标优化

目标：模拟天气、拥堵、政策变化等事件对网络的影响，并支持时间/成本/碳排放多目标优化。  

- 完成动态事件的数据结构设计和前端配置界面。  
- 在仿真引擎中引入事件影响（延时、成本增加、线路关闭）。  
- 引入碳排放模型（按运输方式与距离估算排放）。  
- 多目标权重配置界面与优化方案输出。  
- 提供有/无事件的场景对比。  

验收标准：  
- 用户设置事件后，仿真结果指标发生合理变化。  
- 系统可给出时间优先、成本优先、碳排放优先和综合权重方案。  

---

### 6.5 阶段五：大屏、AI 建议与协作分享

目标：完善展示与对外沟通能力，支持大屏、报告和分享。  

- 设计并实现全屏数据大屏：地图 + 核心指标 + 图表。  
- 集成 AI 建议模块，输出优化建议列表。  
- 实现 Excel/CSV 导出，支持多种统计维度。  
- 实现 PDF 报告导出，包含图表与文字说明。  
- 实现场景分享链接与基础权限控制（只读/可编辑）。  

验收标准：  
- 大屏可用于会议展示，实时反映选定场景数据。  
- 报告导出的内容可直接提供给客户或领导阅读。  
- 分享链接可正常访问相应场景。  

---

## 七、功能完整性检查清单（用于验收）

### 7.1 地图与节点
- 全球地图显示、缩放、拖拽  
- 节点创建/编辑/删除/拖拽  
- 节点类型、等级、规模表示  
- 缩放联动显示不同层级节点  

### 7.2 线路与运输方式
- 节点之间连线（一个对一个、一个对多个）  
- 公路/铁路/海运/空运线路与不同样式  
- 现实可行性约束（公道路网、海上航线、机场到机场等）  

### 7.3 AI 规划与优化
- 时间最短方案  
- 成本最低方案  
- 碳排放最少方案  
- 可配置权重的综合方案  

### 7.4 清关与关税
- 清关节点与清关时间、清关费用配置  
- 按货物类别与国家的关税规则  
- 成本拆分展示：运输/清关/关税  

### 7.5 动态事件
- 天气事件（暴雨/台风/暴雪等）  
- 港口/机场拥堵事件  
- 政策变化事件（关税调整、禁运等）  
- 事件对时间、成本、线路可用性的影响  
- 有/无事件场景对比分析  

### 7.6 仿真与动画
- 多种运输方式的运行动画图标  
- 动画播放、暂停、加速、回放控制  
- 多订单同时仿真展示网络负载  

### 7.7 数据分析与大屏
- 时间、成本、碳排放、准时率等核心指标  
- 多种图表展示（折线、柱状、饼图、流向图等）  
- AI 建议列表与地图/图表联动显示  

### 7.8 场景管理与协作
- 场景的保存、加载、删除  
- 历史版本查看与一键复现  
- 场景间指标对比  
- 场景分享链接与权限控制  
- Excel/CSV 导出  
- PDF 报告导出  

